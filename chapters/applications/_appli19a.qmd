::: {.callout-tip}
## Application 19a: Mettre √† disposition l'API (d√©ploiement continu)

- Lancer un service `ArgoCD` sur le `SSPCloud` depuis la page `Mes services`. Laisser
les configurations par d√©faut. 
- Ouvrez le template [argocd/template-argocd.yml]() et modifier les lignes surlign√©es :

```{python}
#| eval: false
#| file: "argocd/pipeline.yaml"
#| filename: "argocd/pipeline.yaml"
#| source-line-numbers: "8-9,13"
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: ensae-mlops
spec:
  project: default
  source:
    repoURL: https://github.com/ensae-reproductibilite/application-correction.git #<1>
    targetRevision: dev #<2>
    path: deployment
  destination:
    server: https://kubernetes.default.svc
    namespace: user-lgaliana #<3>
  syncPolicy:
    automated:
      selfHeal: true
```
1. L'URL de votre d√©p√¥t `Github` {{< fa brands github >}}
2. La branche √† partir de laquelle vous d√©ployez. La logique voudrait que ce soit `main`. N√©anmoins, ici il s'agit de `dev` pour tenir
compte des instructions ant√©rieures. Si vous avez chang√© de branche, adaptez la branche marqu√©e. 
3. Votre _namespace_ `Kubernetes`. Sur le SSPCloud, cela prend la forme `user-${username}`

- Dans `ArgoCD`, cliquez sur `New App` puis `Edit as a YAML`. Copiez-collez le contenu de `argocd/template-argocd.yml` et cliquez sur `Create`.

Mettre √† jour le code dans `api/main.py` pour changer un √©l√©ment de l'interface de votre documentation.
Par exemple, mettre en gras un titre. 

```{.python}
app = FastAPI(
    title="Pr√©diction de survie sur le Titanic",
    description=
    "<b>Application de pr√©diction de survie sur le Titanic</b> üö¢ <br>Une version par API pour faciliter la r√©utilisation du mod√®le üöÄ" +\
        "<br><br><img src=\"https://media.vogue.fr/photos/5faac06d39c5194ff9752ec9/1:1/w_2404,h_2404,c_limit/076_CHL_126884.jpg\" width=\"200\">"
    )
```

- Acc√©dez √† votre API en utilisant l‚ÄôURL d√©finie dans votre fichier `ingress.yml`.

- Faire un `push` apr√®s avoir committ√©, rafraichir la page de documentation de votre API. Votre page a-t-elle chang√© ? 

:::

